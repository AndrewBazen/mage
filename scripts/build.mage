#!/usr/bin/env mage
# Project Build Script
# This script runs when you execute: mage run build

incant "ğŸ”¨ Building project..."

# Compile/build steps
incant "âš™ï¸  Compiling sources..."

# Example build commands - customize for your project
scry file_exists("Cargo.toml") {
    incant "ğŸ“¦ Building Rust project..."
    evoke "cargo build --release"
} morph file_exists("package.json") {
    incant "ğŸ“¦ Building Node.js project..."
    evoke "npm run build"
} morph file_exists("Makefile") {
    incant "ğŸ“¦ Building with Make..."
    evoke "make"
} lest {
    incant "âš ï¸  No build system detected"
    incant "ğŸ’¡ Add your build commands to scripts/build.mage"
}

# Copy assets
scry directory_exists("assets") {
    incant "ğŸ“ Copying assets..."
    cast ensure_directory("dist")
    evoke "cp -r assets/* dist/"
}

# Run tests as part of build
incant "ğŸ§ª Running tests..."
evoke "mage scripts/test.mage"

incant "âœ… Build complete!" 